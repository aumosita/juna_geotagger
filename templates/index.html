<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📸 Geotag Photos</title>
    <meta name="description" content="GPX 기반 사진 위치정보 삽입 도구">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- 헤더 -->
    <header id="app-header">
        <div class="header-left">
            <h1>📸 Geotag Photos</h1>
            <span id="photo-dir-label" class="header-subtitle"></span>
        </div>
        <div class="header-right">
            <span id="exiftool-status" class="status-badge"></span>
            <button id="btn-scan" class="btn btn-primary" title="사진 폴더 스캔">
                🔍 스캔
            </button>
        </div>
    </header>

    <!-- 메인 -->
    <main id="app-main">
        <!-- 좌측 패널: 사진 목록 -->
        <aside id="panel-photos">
            <div class="panel-header">
                <div class="tab-bar" id="tab-bar">
                    <button class="tab active" data-filter="all">전체 <span class="tab-count" id="count-all">0</span></button>
                    <button class="tab" data-filter="no_gps">GPS 없음 <span class="tab-count" id="count-no-gps">0</span></button>
                    <button class="tab" data-filter="has_gps">GPS 있음 <span class="tab-count" id="count-has-gps">0</span></button>
                    <button class="tab" data-filter="matched">매칭됨 <span class="tab-count" id="count-matched">0</span></button>
                </div>
                <div class="panel-actions">
                    <button id="btn-auto-geotag" class="btn btn-accent" disabled title="선택된 사진 자동 매칭">
                        ⚡ 자동 매칭
                    </button>
                    <button id="btn-select-all" class="btn btn-ghost" title="전체 선택/해제">
                        ☑️
                    </button>
                </div>
            </div>
            <div id="photo-grid" class="photo-grid">
                <div class="empty-state" id="empty-state">
                    <span class="empty-icon">📁</span>
                    <p>🔍 스캔 버튼을 눌러 사진을 불러오세요</p>
                </div>
            </div>
        </aside>

        <!-- 우측 패널: 지도 -->
        <section id="panel-map">
            <div id="map"></div>
            <!-- 안내 오버레이 -->
            <div id="map-instructions" class="map-instructions hidden">
                <span id="instructions-text"></span>
                <button id="btn-cancel-mode" class="btn btn-sm btn-ghost">✕ 취소</button>
            </div>
        </section>
    </main>

    <!-- 토스트 컨테이너 -->
    <div id="toast-container"></div>

    <!-- 프로그레스 바 -->
    <div id="progress-bar" class="progress-bar hidden">
        <div id="progress-fill" class="progress-fill"></div>
    </div>

    <!-- 확인 모달 -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h3 id="modal-title">확인</h3>
            <p id="modal-message"></p>
            <div class="modal-photo-preview" id="modal-preview"></div>
            <div class="modal-actions">
                <button id="modal-cancel" class="btn btn-ghost">취소</button>
                <button id="modal-confirm" class="btn btn-primary">확인</button>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
